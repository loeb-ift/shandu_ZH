# Shandu 項目概述

Shandu 是一個先進的 AI 研究系統，專為綜合知識合成而設計。根據程式碼庫中的資訊，Shandu 是一個基於 LLM（大型語言模型）的智能研究系統，能夠自動化完成從初始查詢到深入內容分析和報告生成的全面研究過程。

## 主要功能

Shandu 系統具有以下主要功能：

- **基於狀態的工作流程**：利用 LangGraph 實現結構化、逐步的研究過程，具有明確的狀態轉換。
- **迭代深度探索**：透過動態深度和廣度遞歸探索主題，適應發現的資訊。
- **多源資訊合成**：分析來自搜尋引擎、網頁內容和結構化知識庫的資料。
- **增強型網頁抓取**：具備動態 JS 渲染、內容提取和道德抓取實踐。
- **智能來源評估**：自動評估來源的可信度、相關性和資訊價值。
- **內容分析管道**：使用高級 NLP 提取關鍵內容、識別模式並綜合發現。
- **全面報告生成**：創建詳細、結構良好的報告，並附上適當的引用和主題組織。

## 研究工作流程

Shandu 實現了一個複雜的多階段研究流程：

1. **查詢澄清**：透過互動問題了解研究需求。
2. **研究規劃**：為全面主題覆蓋進行戰略規劃。
3. **迭代探索**：
   - 基於知識空白的智能查詢生成。
   - 進行並行執行的多引擎搜尋。
   - 搜尋結果的相關性過濾。
   - 具備內容提取的智能網頁抓取。
   - 來源可信度評估。
   - 資訊分析和綜合。
   - 對於發現的反思以識別空白。
4. **報告生成**：
   - 主題提取和組織。
   - 多步報告增強。
   - 引用格式化和管理。
   - 全面覆蓋的章節擴展。

## 工作流程

1. **初始化**：研究過程從用戶的查詢和初步參數開始。
2. **生成查詢**：系統根據上下文生成針對性的搜尋查詢。
3. **搜尋**：執行搜尋查詢並處理結果。
4. **反思**：分析發現並識別知識空白。
5. **循環**：步驟 2-4 重複，直到達到足夠的深度。
6. **智能來源選擇**：篩選並優先考慮最有價值的來源。
7. **格式化引用**：準備正確格式化的引用。
8. **報告生成**：從初稿到最終報告的多階段過程。


    A[初始化] --> B[生成查詢]
    B --> C[搜尋]
    C --> D[反思]
    D --> E[循環]
    E --> B
    E --> F[智能來源選擇]
    F --> G[格式化引用]
    G --> H[報告生成]



## 系統架構

研究系統採用模組化、狀態驅動的架構來有效管理研究工作流程。其核心是一個協調不同研究狀態之間轉換的有向圖實現。系統包括以下關鍵組件：

- **ResearchGraph**：主要協調器，使用 LangGraph 的基於狀態的架構定義研究工作流程，管理不同研究階段之間的轉換。
- **ResearchAgent**：執行特定研究任務，包括搜尋、內容分析和知識提取，並與 AISearcher 和 WebScraper 等外部系統介面。
- **AgentState**：維護研究過程狀態的資料結構，包括累積知識、搜尋結果和進度追蹤。
- **研究節點**：處理研究過程中特定階段的專門組件：
  - 初始化：設定研究上下文。
  - 反思：分析當前知識以識別空白。
  - 生成查詢：創建有針對性的搜尋查詢。
  - 搜尋：從多個來源檢索資訊。
  - 來源選擇：識別最相關的來源。
  - 引用：管理來源的適當歸屬。
  - 報告生成：創建最終研究輸出。

## 使用方法

Shandu 可以透過命令列介面或 Python API 使用：

### 命令列介面

```bash
# 配置 API 設定（支持各種 LLM 提供商）  
shandu configure  
  
# 進行全面研究  
shandu research "您的研究查詢" --depth 2 --breadth 4 --output report.md  
  
# 快速 AI 驅動搜尋與網頁抓取  
shandu aisearch "誰是美國現任總統？" --detailed  
  
# 基本多引擎搜尋  
shandu search "您的搜尋查詢"
## 使用方法

以下是如何使用 Shandu 進行深度研究的範例代碼：

```python
from shandu.agents import ResearchGraph  
from langchain_openai import ChatOpenAI  
  
# 如果需要，使用自定義 LLM 初始化  
llm = ChatOpenAI(model="gpt-4")  
  
# 初始化研究圖  
researcher = ResearchGraph(  
    llm=llm,  
    temperature=0.5  
)  
  
# 執行深度研究  
results = researcher.research_sync(  
    query="您的研究查詢",  
    depth=3,       # 迴圈研究的深度  
    breadth=4,     # 要探索的並行查詢數量  
    detail_level="high"  
)  
  
# 打印或保存結果  
print(results.to_markdown())```

